<mat-sidenav-container class="sidenav-container">
  <mat-sidenav
    #sidenav
    mode="side"
    class="app-sidenav"
    [opened]="(isHandset$ | async) === false"
    style="background-color: #00517a"
  >
    <mat-toolbar
      style="display: flex; align-items: center; justify-content: center"
    >
      <div>
        <img
          src="assets/images/logo_movistar.png"
          alt="Logo"
          style="max-width: 100%; height: 64px"
        />
      </div>
    </mat-toolbar>

    <mat-nav-list class="menu-list">
      <ng-container *ngFor="let menu of menuItems; let i = index">
        <!-- Verifica si el elemento tiene submenús -->
        <ng-container *ngIf="menu.children && menu.children.length > 0">
          <mat-expansion-panel
            [class.mat-elevation-z0]="true"
            style="background-color: #00517a; color: #fff"
            [expanded]="step === i"
            (opened)="setStep(i)"
            [hideToggle]="!menu.children || menu.children.length === 0"
          >
            <mat-expansion-panel-header class="specific-class">
              <mat-icon style="color: #fff">{{ menu.icon }}</mat-icon>
              <span>{{ menu.name }}</span>
            </mat-expansion-panel-header>

            <mat-list *ngFor="let submenu of menu.children">
              <mat-list-item routerLink="{{ submenu.link }}">
                <mat-icon>{{ submenu.icon }}</mat-icon>
                <span>{{ submenu.name }}</span>
              </mat-list-item>
            </mat-list>
          </mat-expansion-panel>
        </ng-container>
        <!-- Si el elemento no tiene submenús, muestra un mat-list-item regular -->
        <mat-list *ngIf="!menu.children || menu.children.length === 0">
          <mat-list-item routerLink="{{ menu.link }}">
            <div style="margin-left: 10px">
              <mat-icon style="color: #fff">{{ menu.icon }}</mat-icon>
              <span style="color: #fff">{{ menu.name }}</span>
            </div>
          </mat-list-item>
        </mat-list>
      </ng-container>
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar color="primary">
      <button mat-icon-button (click)="sidenav.toggle()" matTooltip="Menu">
        <mat-icon>menu</mat-icon>
      </button>
      <span>GOYA+</span>
      <span class="toolbar-item-spacer"></span>

      <mat-icon style="margin-right: 10px" class="user-info"
        >account_circle</mat-icon
      >
      <div style="text-align: center" class="user-info">
        <span>Jose Miguel Sosa</span>
        <br />
        <span>Administrador</span>
      </div>

      <button
        mat-icon-button
        matTooltip="Mi perfil"
        [matMenuTriggerFor]="userAccountMenu"
      >
        <mat-icon>more_vert</mat-icon>
      </button>

      <mat-menu #userAccountMenu [overlapTrigger]="false" yPosition="below">
        <button mat-menu-item routerLink="#">
          <mat-icon>person</mat-icon><span>Mi perfil</span>
        </button>
        <button mat-menu-item routerLink="#">
          <mat-icon>settings</mat-icon><span>Configuracion</span>
        </button>
        <button mat-menu-item routerLink="#">
          <mat-icon>help</mat-icon><span>Ayuda</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item routerLink="#">
          <mat-icon>exit_to_app</mat-icon>Cerrar sesion
        </button>
      </mat-menu>
    </mat-toolbar>

    <mat-toolbar
      color="primary"
      style="height: 32px; background-color: #019df4; top: 64px"
    >
      <xng-breadcrumb [autoGenerate]="false">
        <ng-container *xngBreadcrumbItem="let breadcrumb">
          <b>{{ breadcrumb }}</b>
        </ng-container>
      </xng-breadcrumb>
    </mat-toolbar>

    <router-outlet></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container>
